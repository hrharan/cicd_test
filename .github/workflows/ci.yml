name: Full CI/CD Pipeline

on: [push]

jobs:
  # JOB 1: THE FILTER (CI)
  build-and-test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    - name: Install dependencies
      run: pip install pytest
    - name: Run tests
      run: pytest

  # JOB 2: THE DELIVERY (CD)
  deploy:
    runs-on: ubuntu-latest
    # VITAL: This tells GitHub to WAIT for the test job
    needs: build-and-test 
    
    steps:
      - name: Deploy to production
        run: |
          echo "ðŸš€ Starting deployment..."
          echo "Connnecting to server..."
          echo "Copying files..."
          echo "âœ… Deployed successfully!"
